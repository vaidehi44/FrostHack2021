{% extends 'admin_portal/base.html' %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'admin_portal/css/tt.css' %}" type="text/css" >

{% endblock styles %}

{% block content %}
    <div class="main">    

            <div class="cont">
                <ul >
                    <li class="list-group-item">
                    <h3>Class 1</h3>
                    <div class='cont2'> 
                        <div class='tt'>
                            <table id="1">
                        
                        
                            </table>
                        </div>

                        <div class='upload'>

                            <h3>Update Timetable</h3>
                            <form action='' method='post' enctype="multipart/form-data">

                                {% csrf_token %}
                                <label for="file">Select an excel file:</label>
                                <input type='file' id="excel_file" name='excel_file'><br>
                                <input type='hidden' name='std' value="1">

                                <input type='submit' value='Update'> 

                            </form> 
                        </div>
                    </div>
                    
                    
                    </li>


                    <li class="list-group-item">
                        <h3>Class 2</h3>
                        <div class='cont2'> 
                            <div class='tt'>
                                <table id="2">
                            
                                </table>
                            </div>
    
                            <div class='upload'>
    
                                <h3>Update Timetable</h3>
                                <form action='' method='post' enctype="multipart/form-data">
    
                                    {% csrf_token %}
                                    <label for="file">Select an excel file:</label>
                                    <input type='file' id="excel_file" name='excel_file'><br>
                                    <input type='hidden' name='std' value="1">
    
                                    <input type='submit' value='Update'> 
    
                                </form> 
                            </div>
                        </div>
                        
                        
                        </li>
                    
                </ul>
                
                
            </div>
                
    </div>
 
    {% endblock content %}

{% block scripts %}
    <script>
        var array = {{ tt_array|safe }}
       // var array = [ '{"c1":{"0":"s1","1":"s2"},"c2":{"0":"s11","1":"s22"}}', '{"c1":{"0":"s1","1":"s2"},"c2":{"0":"s11","1":"s22"}}']
        var k=1;
        for (i=0; i<2;i++) {
            tt_json = JSON.parse(array[i]);
            table = document.getElementById(k.toString());
            header_row = document.createElement("TR");
    
            table.appendChild(header_row);
        
        
            for (header in tt_json) {
                cell = document.createElement("TH");
                header_row.appendChild(cell);
                cell.innerHTML = header;
            }
        
            const row_count = 5;
            for (var j=0; j<5; j++ ){
                row = document.createElement("TR");
                table.appendChild(row);
                index = j.toString();
                for (column in tt_json) {
                    cell = document.createElement("TD");
                    row.appendChild(cell);
                    
                    cell.innerHTML = tt_json[column][index];
                    }
                }

            k = (k + 1);
            }

    
    </script>
{% endblock scripts %}

